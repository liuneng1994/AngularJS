#依赖注入

依赖注入(DI)是一种软件设计模式,用于管理组件的依赖.

Angular注射器(injector)子系统负责创建组件,解决它们的依赖,并且提供给其他需要的组件.

##使用依赖注入

DI在Angular中无处不在.你可以在定义组件或者给模块提供`run`或者`config`块的时候使用它.
*  组件(component)(服务,指令,过滤器和动画)是通过可注入的工厂方法或构造函数定义的.这些组件都可以将`service`和值`value`的组件作为依赖.
* 控制器是通过构造函数定义的,同样也可以将任何`service`和`value`的组件作为依赖,控制器也可以指定依赖.
*  `run`方法接受一个函数作为参数,这个函数可以被注入`service`,`value`和`constant`组件.注意你不能注入`provider`到`run`块中.
*  `config`方法接受一个函数作为参数,可以被注入`provider`和`constant`组件.注意你不能注入`service`或者`value`组件到设置中.

查看模块章节获得更多关于`run`和`config`的细节.

###工厂方法

你是通过一个工厂函数定义一个指令,服务,或者过滤器的.这个工厂方法被注册在模块中.推荐用一以下方式声明工厂:
```js
angular.module('myModule', [])
.factory('serviceId', ['depService', function(depService) {
  // ...
}])
.directive('directiveName', ['depService', function(depService) {
  // ...
}])
.filter('filterName', ['depService', function(depService) {
  // ...
}]);
```
###模块的方法

我们可以通过调用`config`和`run`方法去指定函数运行时的配置和环境.这些函数被注入依赖的方式与工厂函数一样.
```js
angular.module('myModule', [])
.config(['depProvider', function(depProvider) {
  // ...
}])
.run(['depService', function(depService) {
  // ...
}]);
```
###控制器

控制器在模板中通过为应用程序提供行为来支持指令标记,控制器是**类**或者**构造函数**.推荐通过数组标记的方式去声明控制器:
```js
someModule.controller('MyController', ['$scope', 'dep1', 'dep2', function($scope, dep1, dep2) {
  ...
  $scope.aMethod = function() {
    ...
  }
  ...
}]);
```
与服务不同,在一个应用程序中可以有许多个相同类型的控制器实例.

此外,控制器可以使用更多类型的依赖:
*  `$scope`:控制器与一个DOM元素相关联并且可以去访问与元素关联scope.而且其他的组件(如服务)只能访问`$rootScope`服务.
*  `resolves`:如果一个控制器作为一个路由的一部分被实例化,那么路由的`resolve`部分都可以被注入到控制器中

##依赖注解

Angular通过`injector`执行确定的函数(服务工厂,控制器).你需要标识出这些函数需要哪些服务.有三种注解方式可以为你的代码提供服务的名称信息:
*  使用内联的数组注解(推荐)
*  使用`$inject`属性注解
*  隐式的从函数参数名称中获得(有风险)

###内联数据注解




